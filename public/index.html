<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>yt-dlp-ui</title>
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
  <div class="app-layout">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="logo">
        <h1>üé¨ yt-dlp-ui</h1>
      </div>
      <nav class="nav-menu">
        <a href="#home" class="nav-item active" data-page="home">
          <span class="icon">üè†</span>
          <span>Home</span>
        </a>
        <a href="#channels" class="nav-item" data-page="channels">
          <span class="icon">üì∫</span>
          <span>Channels</span>
        </a>
        <a href="#config" class="nav-item" data-page="config">
          <span class="icon">‚öôÔ∏è</span>
          <span>Config</span>
        </a>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Home Page -->
      <div class="page active" id="page-home">
        <h2 class="page-title">Dashboard</h2>
        
        <!-- Stats Grid -->
        <div class="stats-grid">
          <div class="stat-box">
            <div class="stat-value" id="stat-channels">0</div>
            <div class="stat-label">Channels</div>
          </div>
          <div class="stat-box">
            <div class="stat-value" id="stat-total-downloads">0</div>
            <div class="stat-label">Total Downloads</div>
          </div>
          <div class="stat-box">
            <div class="stat-value" id="stat-library-size">0 GB</div>
            <div class="stat-label">Library Size</div>
          </div>
        </div>

        <!-- Download History -->
        <div class="content-box">
          <div class="box-header">
            <h3>Media History</h3>
            <div class="pagination" id="history-pagination">
              <button class="btn-icon" onclick="prevHistoryPage()" id="history-prev">‚Äπ</button>
              <span id="history-page-info">Page 1</span>
              <button class="btn-icon" onclick="nextHistoryPage()" id="history-next">‚Ä∫</button>
            </div>
          </div>
          <table class="data-table">
            <thead>
              <tr>
                <th>Video Title</th>
                <th>Upload Date</th>
                <th>Indexed</th>
                <th>Downloaded</th>
                <th>Channel</th>
              </tr>
            </thead>
            <tbody id="history-table-body">
              <tr><td colspan="5" class="empty-state">No downloads yet</td></tr>
            </tbody>
          </table>
        </div>

        <!-- Current Queue -->
        <div class="content-box">
          <div class="box-header">
            <h3>Current Queue</h3>
            <div class="pagination" id="queue-pagination">
              <button class="btn-icon" onclick="prevQueuePage()" id="queue-prev">‚Äπ</button>
              <span id="queue-page-info">Page 1</span>
              <button class="btn-icon" onclick="nextQueuePage()" id="queue-next">‚Ä∫</button>
            </div>
          </div>
          <table class="data-table">
            <thead>
              <tr>
                <th>Video Title</th>
                <th>Status</th>
                <th>Progress</th>
                <th>Channel</th>
              </tr>
            </thead>
            <tbody id="queue-table-body">
              <tr><td colspan="4" class="empty-state">No items in queue</td></tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Channels Page -->
      <div class="page" id="page-channels">
        <h2 class="page-title">Channels</h2>
        
        <div class="content-box">
          <div class="box-header">
            <h3>All Channels</h3>
            <button class="btn btn-primary" onclick="showAddChannelModal()">+ Add Channel</button>
          </div>
          <table class="data-table">
            <thead>
              <tr>
                <th>Channel Name</th>
                <th>Pending</th>
                <th>Downloaded</th>
                <th>Size</th>
                <th>Enabled</th>
              </tr>
            </thead>
            <tbody id="channels-table-body">
              <tr><td colspan="5" class="empty-state">No channels added yet</td></tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Config Page -->
      <div class="page" id="page-config">
        <h2 class="page-title">Configuration</h2>
        
        <!-- Scheduler Config -->
        <div class="content-box">
          <h3>Scheduler</h3>
          <div class="form-group">
            <label for="scheduler-interval">Check interval (days)</label>
            <input type="number" id="scheduler-interval" value="7" min="1">
          </div>
          <div class="button-group">
            <button class="btn btn-primary" onclick="startScheduler()">Start Scheduler</button>
            <button class="btn btn-secondary" onclick="stopScheduler()">Stop Scheduler</button>
          </div>
          <div id="scheduler-status" class="status-message"></div>
        </div>

        <!-- Cookie Management -->
        <div class="content-box">
          <h3>Cookie Management</h3>
          <p class="help-text">Upload your YouTube cookies for age-restricted or member-only content</p>
          <div class="form-group">
            <label for="cookies-content">Cookies (Netscape format)</label>
            <textarea id="cookies-content" rows="10" placeholder="# Netscape HTTP Cookie File..."></textarea>
          </div>
          <div class="button-group">
            <button class="btn btn-primary" onclick="saveCookies()">Save Cookies</button>
            <button class="btn btn-secondary" onclick="loadCookies()">Load Current</button>
            <button class="btn btn-secondary" onclick="deleteCookies()">Delete Cookies</button>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Channel Detail Modal -->
  <div id="channel-modal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modal-channel-name">Channel Details</h2>
        <button class="close-btn" onclick="closeChannelModal()">&times;</button>
      </div>
      <div class="modal-body" id="channel-modal-body">
        <!-- Loaded dynamically -->
      </div>
    </div>
  </div>

  <!-- Video Detail Modal -->
  <div id="video-modal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modal-video-title">Video Details</h2>
        <button class="close-btn" onclick="closeVideoModal()">&times;</button>
      </div>
      <div class="modal-body" id="video-modal-body">
        <!-- Loaded dynamically -->
      </div>
    </div>
  </div>

  <!-- Add Channel Modal -->
  <div id="add-channel-modal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Add Content</h2>
        <button class="close-btn" onclick="closeAddChannelModal()">&times;</button>
      </div>
      <div class="modal-body">
        <p class="help-text">Add a channel, playlist, or single video URL</p>
        <form id="add-channel-form">
          <div class="form-group">
            <label for="channel-url">YouTube URL</label>
            <input type="text" id="channel-url" placeholder="Channel, Playlist, or Video URL" required>
            <small>Examples: @channelname, /playlists URL, playlist?list=..., or watch?v=...</small>
          </div>
          <div class="form-group">
            <label><input type="checkbox" id="playlist-mode" checked> Enumerate Playlists (for channels)</label>
          </div>
          <div class="form-group" id="playlist-options">
            <label><input type="checkbox" id="auto-add-playlists"> Auto-enable new playlists</label>
          </div>
          <div class="form-group">
            <label><input type="checkbox" id="flat-mode"> Flat mode (single folder)</label>
          </div>
          <details class="advanced-options">
            <summary>Advanced Options</summary>
            <div class="form-group">
              <label for="yt-dlp-options">Custom yt-dlp options</label>
              <textarea id="yt-dlp-options" placeholder="--format best" rows="3"></textarea>
              <small>Space-separated yt-dlp command line options</small>
            </div>
            <div class="form-group">
              <label for="rescrape-days">Re-scrape interval (days)</label>
              <input type="number" id="rescrape-days" value="7" min="1">
            </div>
          </details>
          <button type="submit" class="btn btn-primary">Add</button>
        </form>
      </div>
    </div>
  </div>

  <script src="/js/app.js"></script>
</body>
</html>
